<main class="nxl-container">
    <div class="nxl-content">
        <!-- [ page-header ] start -->
        <div class="page-header mb-4">
            <div class="page-header-left d-flex align-items-center">
                <div class="page-header-title">
                    <h4 class="fw-bold text-primary mb-1">API Documentation</h4>
                </div>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb ms-3 mb-0">
                        <li class="breadcrumb-item"><a href="/" class="text-decoration-none">Home</a></li>
                        <li class="breadcrumb-item active">Documentation</li>
                    </ol>
                </nav>
            </div>
            <div class="page-header-right ms-auto">
                <div class="page-header-right-items">
                    <div class="d-flex d-md-none">
                        <a href="javascript:void(0)" class="page-header-right-close-toggle">
                            <i class="feather-arrow-left me-2"></i>
                            <span>Back</span>
                        </a>
                    </div>
                    
                </div>
                <div class="d-md-none d-flex align-items-center">
                    <a href="javascript:void(0)" class="page-header-right-open-toggle">
                        <i class="feather-align-right fs-20"></i>
                    </a>
                </div>
            </div>
        </div>
        <!-- [ page-header ] end -->

        <div class="main-content">
            <!-- API Overview -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-info-circle me-2"></i>API Overview</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Base URL</h6>
                            <p class="text-muted mb-2">Dynamic base URL automatically detected from current domain:</p>
                            <code class="bg-light p-2 rounded d-block" id="dynamicBaseUrl">Loading...</code>
                            <small class="text-muted">No need to manually change URLs when deploying!</small>
                        </div>
                        <div class="col-md-6">
                            <h6>Authentication</h6>
                            <p class="mb-0">All API endpoints require JWT token in Authorization header:</p>
                            <code class="bg-light p-2 rounded d-block">Authorization: Bearer &lt;token&gt;</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Authentication APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-shield-lock me-2"></i>Authentication APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-success">POST /auth/login</h6>
                        <p class="text-muted">User login to get JWT token</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "username": "admin",
  "password": "password123"
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Login successful",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "username": "admin",
    "email": "admin@example.com"
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-success">POST /auth/register</h6>
                        <p class="text-muted">User registration</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "username": "newuser",
  "email": "user@example.com",
  "password": "password123"
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "User registered successfully",
  "user": {
    "id": 2,
    "username": "newuser",
    "email": "user@example.com"
  }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WhatsApp Session APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-whatsapp me-2"></i>WhatsApp Session APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-info">GET /api/whatsapp/sessions</h6>
                        <p class="text-muted">Get all WhatsApp sessions for authenticated user</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "sessions": [
    {
      "session_id": "abc123",
      "user_id": 1,
      "description": "My WhatsApp Session",
      "isConnected": true,
      "hasQrCode": false,
      "lastSeen": "2024-01-15T10:30:00Z",
      "created_at": "2024-01-15T09:00:00Z"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-info">GET /api/whatsapp/session/:sessionId/qrcode</h6>
                        <p class="text-muted">Get QR code for WhatsApp session</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "QR Code siap untuk di-scan",
  "qrCode": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...",
  "expiresIn": 60
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Broadcast List APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-broadcast me-2"></i>Broadcast List APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-warning">GET /api/whatsapp/:sessionId/broadcast/lists</h6>
                        <p class="text-muted">Get all broadcast lists for a session</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "data": {
    "lists": [
      {
        "id": 1,
        "name": "VIP Customers",
        "description": "Important customers list",
        "contact_count": 150,
        "created_at": "2024-01-15T09:00:00Z"
      }
    ]
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-warning">POST /api/whatsapp/:sessionId/broadcast/lists</h6>
                        <p class="text-muted">Create new broadcast list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "name": "New List",
  "description": "List description"
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Broadcast list created successfully",
  "data": {
    "id": 2,
    "name": "New List",
    "description": "List description"
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-warning">PUT /api/whatsapp/:sessionId/broadcast/lists/:listId</h6>
                        <p class="text-muted">Update broadcast list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "name": "Updated List Name",
  "description": "Updated description"
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Broadcast list updated successfully"
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-warning">DELETE /api/whatsapp/:sessionId/broadcast/lists/:listId</h6>
                        <p class="text-muted">Delete broadcast list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Broadcast list deleted successfully"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Broadcast Contact APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="bi bi-people me-2"></i>Broadcast Contact APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-secondary">GET /api/whatsapp/:sessionId/broadcast/lists/:listId/contacts</h6>
                        <p class="text-muted">Get contacts in a broadcast list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "data": {
    "contacts": [
      {
        "id": 1,
        "contact_number": "628123456789",
        "contact_name": "John Doe",
        "is_active": true
      }
    ]
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-secondary">POST /api/whatsapp/:sessionId/broadcast/lists/:listId/contacts</h6>
                        <p class="text-muted">Add contacts to broadcast list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "contacts": [
    {
      "number": "628123456789",
      "name": "John Doe"
    },
    {
      "number": "628987654321",
      "name": "Jane Smith"
    }
  ]
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Contacts added successfully",
  "data": {
    "added": 2,
    "duplicates": 0
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-secondary">DELETE /api/whatsapp/:sessionId/broadcast/lists/:listId/contacts</h6>
                        <p class="text-muted">Remove contacts from broadcast list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "contactNumbers": ["628123456789", "628987654321"]
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Contacts removed successfully",
  "data": {
    "removed": 2
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-secondary">POST /api/whatsapp/:sessionId/broadcast/lists/:listId/clean-duplicates</h6>
                        <p class="text-muted">Clean duplicate contacts in broadcast list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Duplicate contacts cleaned successfully",
  "data": {
    "removedCount": 5
  }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Broadcast Campaign APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0"><i class="bi bi-send me-2"></i>Broadcast Campaign APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-danger">POST /api/whatsapp/:sessionId/broadcast/send</h6>
                        <p class="text-muted">Send broadcast message</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "campaignName": "Promo January",
  "broadcastListId": 1,
  "message": "Hello! Check out our new promotion!",
  "delay": 1000
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Broadcast campaign started successfully",
  "data": {
    "campaignId": 1,
    "totalContacts": 150,
    "estimatedTime": "2 minutes"
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-danger">GET /api/whatsapp/:sessionId/broadcast/campaigns</h6>
                        <p class="text-muted">Get broadcast campaigns</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "data": {
    "campaigns": [
      {
        "id": 1,
        "campaign_name": "Promo January",
        "status": "completed",
        "sent_count": 150,
        "failed_count": 0,
        "created_at": "2024-01-15T10:00:00Z"
      }
    ]
  }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WhatsApp Chat APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-chat-dots me-2"></i>WhatsApp Chat APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-primary">GET /api/whatsapp/:sessionId/chats</h6>
                        <p class="text-muted">Get all chats from WhatsApp session</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "chats": [
    {
      "id": "628123456789@c.us",
      "name": "John Doe",
      "isGroup": false,
      "timestamp": 1642233600,
      "unreadCount": 2
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-primary">GET /api/whatsapp/:sessionId/chats/:contactId</h6>
                        <p class="text-muted">Get chat messages with a specific contact</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                                <h6>Query Parameters:</h6>
                                <pre class="bg-light p-3 rounded"><code>limit: 50 (optional, default: 50)</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "contact": {
    "id": "628123456789@c.us",
    "name": "John Doe",
    "isGroup": false
  },
  "messages": [
    {
      "id": "3EB0C767D742B9EE0B25",
      "body": "Hello!",
      "fromMe": true,
      "author": null,
      "timestamp": 1642233600,
      "hasMedia": false,
      "type": "chat",
      "mediaData": null
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-primary">POST /api/whatsapp/:sessionId/chats/:contactId</h6>
                        <p class="text-muted">Send text message to a contact</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "message": "Hello! How are you?"
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Pesan berhasil dikirim",
  "messageId": "3EB0C767D742B9EE0B25",
  "timestamp": 1642233600
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-primary">POST /api/whatsapp/:sessionId/chats/:contactId/file</h6>
                        <p class="text-muted">Send file (image/document) to a contact</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "message": "Check this file",
  "fileType": "image/jpeg",
  "fileName": "photo.jpg",
  "fileData": "base64_encoded_file_data"
}</code></pre>
                                <h6>Supported File Types:</h6>
                                <ul class="small text-muted">
                                    <li>Images: JPEG, JPG, PNG, GIF, WebP</li>
                                    <li>Documents: PDF, DOC, DOCX, XLS, XLSX</li>
                                    <li>Text: TXT</li>
                                    <li>Max Size: 10MB</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "File berhasil dikirim",
  "messageId": "file-sent-success",
  "timestamp": 1642233600,
  "fileType": "image/jpeg",
  "fileName": "photo.jpg"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WhatsApp Session Management APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-phone me-2"></i>WhatsApp Session Management APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-warning">GET /api/whatsapp/sessions</h6>
                        <p class="text-muted">Get all WhatsApp sessions for current user</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "sessions": [
    {
      "session_id": "d0cc358f-20c0-4307-a15d-d40566105071",
      "name": "WhatsApp Session 1",
      "status": "ready",
      "created_at": "2024-01-15T09:00:00Z",
      "last_activity": "2024-01-15T10:30:00Z"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-warning">GET /api/whatsapp/session/:sessionId</h6>
                        <p class="text-muted">Get detailed information about a specific session</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "session": {
    "session_id": "d0cc358f-20c0-4307-a15d-d40566105071",
    "name": "WhatsApp Session 1",
    "status": "ready",
    "created_at": "2024-01-15T09:00:00Z",
    "last_activity": "2024-01-15T10:30:00Z",
    "client_status": {
      "exists": true,
      "isReady": true,
      "hasPage": true,
      "connectionState": "connected"
    },
    "statistics": {
      "message_count": 5,
      "contact_count": 150
    }
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-warning">POST /api/whatsapp/sessions</h6>
                        <p class="text-muted">Create new WhatsApp session</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "name": "My WhatsApp Session"
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Session created successfully",
  "session": {
    "session_id": "d0cc358f-20c0-4307-a15d-d40566105071",
    "name": "My WhatsApp Session",
    "qr_code": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...",
    "status": "qr_ready"
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-warning">DELETE /api/whatsapp/sessions/:sessionId</h6>
                        <p class="text-muted">Delete WhatsApp session</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Session deleted successfully"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-person-lines-fill me-2"></i>Contact APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-success">GET /api/whatsapp/:sessionId/contacts</h6>
                        <p class="text-muted">Get all contacts from WhatsApp session</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "data": {
    "contacts": [
      {
        "id": "628123456789@c.us",
        "number": "628123456789",
        "name": "John Doe",
        "pushname": "John",
        "isGroup": false
      }
    ]
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-success">POST /api/whatsapp/:sessionId/contacts/import</h6>
                        <p class="text-muted">Import contacts from CSV file</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body (Form Data):</h6>
                                <pre class="bg-light p-3 rounded"><code>file: [CSV file]
format: "number,name"</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Contacts imported successfully",
  "data": {
    "imported": 50,
    "duplicates": 5
  }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Broadcast APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0"><i class="bi bi-megaphone me-2"></i>Broadcast APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-danger">GET /api/broadcast/lists</h6>
                        <p class="text-muted">Get all broadcast lists for current user</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "lists": [
    {
      "id": 1,
      "name": "Customer List",
      "contact_count": 150,
      "created_at": "2024-01-15T09:00:00Z"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-danger">POST /api/broadcast/lists</h6>
                        <p class="text-muted">Create new broadcast list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "name": "New Customer List",
  "contacts": [
    {
      "number": "628123456789",
      "name": "John Doe"
    }
  ]
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Broadcast list created successfully",
  "list_id": 1
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-danger">POST /api/broadcast/send</h6>
                        <p class="text-muted">Send broadcast message to list</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "list_id": 1,
  "session_id": "d0cc358f-20c0-4307-a15d-d40566105071",
  "message": "Hello everyone! This is a broadcast message."
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Broadcast sent successfully",
  "sent_count": 150,
  "failed_count": 0
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Management APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0"><i class="bi bi-people-fill me-2"></i>User Management APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-dark">GET /api/users</h6>
                        <p class="text-muted">Get all users (admin only)</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "data": {
    "users": [
      {
        "id": 1,
        "username": "admin",
        "email": "admin@example.com",
        "created_at": "2024-01-15T09:00:00Z"
      }
    ]
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-dark">PUT /api/users/:userId</h6>
                        <p class="text-muted">Update user profile</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Request Body:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "username": "newusername",
  "email": "newemail@example.com"
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "User updated successfully"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard APIs -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-graph-up me-2"></i>Dashboard APIs</h5>
                </div>
                <div class="card-body">
                    <div class="api-endpoint mb-4">
                        <h6 class="text-info">GET /api/dashboard/lists</h6>
                        <p class="text-muted">Get broadcast lists for dashboard</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "VIP Customers",
      "description": "Important customers",
      "contact_count": 150,
      "created_at": "2024-01-15T09:00:00Z"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-endpoint mb-4">
                        <h6 class="text-info">GET /api/dashboard/campaigns</h6>
                        <p class="text-muted">Get campaigns for dashboard</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Headers:</h6>
                                <pre class="bg-light p-3 rounded"><code>Authorization: Bearer &lt;token&gt;</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Response:</h6>
                                <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Promo January",
      "status": "completed",
      "sent_count": 150,
      "failed_count": 0,
      "created_at": "2024-01-15T10:00:00Z"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WhatsApp Error Handling -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-exclamation-triangle me-2"></i>WhatsApp Error Handling</h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-warning">
                        <h6><i class="bi bi-info-circle me-2"></i>Serialize Error Handling</h6>
                        <p class="mb-0">WhatsApp Web.js sometimes encounters serialize errors. Our API automatically handles these with:</p>
                        <ul class="mb-0 mt-2">
                            <li><strong>Timeout Protection:</strong> 30-second timeout for all operations</li>
                            <li><strong>Manual Verification:</strong> Check recent messages to verify delivery</li>
                            <li><strong>Fallback Response:</strong> Assume success for known serialize issues</li>
                        </ul>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Serialize Error Response:</h6>
                            <pre class="bg-light p-3 rounded"><code>{
  "success": true,
  "message": "Pesan berhasil dikirim (verifikasi manual)",
  "messageId": "manual-verification",
  "timestamp": 1642233600,
  "note": "Message verified as sent despite serialize error"
}</code></pre>
                        </div>
                        <div class="col-md-6">
                            <h6>Client Not Ready Error:</h6>
                            <pre class="bg-light p-3 rounded"><code>{
  "success": false,
  "message": "WhatsApp client belum siap. Silakan scan QR code terlebih dahulu.",
  "needScan": true
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error Responses -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0"><i class="bi bi-exclamation-triangle me-2"></i>Error Responses</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>400 Bad Request:</h6>
                            <pre class="bg-light p-3 rounded"><code>{
  "success": false,
  "message": "Validation error",
  "errors": ["Name is required"]
}</code></pre>
                        </div>
                        <div class="col-md-6">
                            <h6>401 Unauthorized:</h6>
                            <pre class="bg-light p-3 rounded"><code>{
  "success": false,
  "message": "Invalid or expired token"
}</code></pre>
                        </div>
                    </div>
                    
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <h6>403 Forbidden:</h6>
                            <pre class="bg-light p-3 rounded"><code>{
  "success": false,
  "message": "Access denied"
}</code></pre>
                        </div>
                        <div class="col-md-6">
                            <h6>500 Internal Server Error:</h6>
                            <pre class="bg-light p-3 rounded"><code>{
  "success": false,
  "message": "Internal server error",
  "error": "Database connection failed"
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rate Limiting -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-speedometer2 me-2"></i>Rate Limiting</h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <h6><i class="bi bi-info-circle me-2"></i>Rate Limits</h6>
                        <ul class="mb-0">
                            <li><strong>Authentication APIs:</strong> 10 requests per minute per IP</li>
                            <li><strong>WhatsApp Session APIs:</strong> 30 requests per minute per user</li>
                            <li><strong>WhatsApp Chat APIs:</strong> 100 requests per minute per user</li>
                            <li><strong>WhatsApp Contact APIs:</strong> 50 requests per minute per user</li>
                            <li><strong>Broadcast APIs:</strong> 20 requests per minute per user</li>
                            <li><strong>User Management APIs:</strong> 20 requests per minute per user</li>
                            <li><strong>Dashboard APIs:</strong> 30 requests per minute per user</li>
                        </ul>
                    </div>
                    
                    <div class="alert alert-warning">
                        <h6><i class="bi bi-exclamation-triangle me-2"></i>WhatsApp Web.js Limitations</h6>
                        <ul class="mb-0">
                            <li><strong>Message Sending:</strong> Max 1 message per second per session</li>
                            <li><strong>File Upload:</strong> Max 10MB per file</li>
                            <li><strong>Media Download:</strong> Automatic retry on failure</li>
                            <li><strong>Session Management:</strong> Max 5 concurrent sessions per user</li>
                        </ul>
                    </div>
                    
                    <div class="alert alert-warning">
                        <h6><i class="bi bi-exclamation-triangle me-2"></i>Rate Limit Response</h6>
                        <p class="mb-0">When rate limit is exceeded, API returns:</p>
                        <pre class="bg-light p-2 rounded mt-2"><code>{
  "success": false,
  "message": "Rate limit exceeded",
  "retryAfter": 60
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<style>
    .api-endpoint {
        border-left: 4px solid #dee2e6;
        padding-left: 1rem;
        margin-bottom: 2rem;
    }
    
    .api-endpoint h6 {
        font-weight: 600;
        margin-bottom: 0.5rem;
    }
    
    pre {
        font-size: 0.875rem;
        line-height: 1.4;
        border: 1px solid #e9ecef;
    }
    
    code {
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    }
    
    .card-header {
        border-bottom: none;
    }
    
    .text-success { color: #198754 !important; }
    .text-warning { color: #fd7e14 !important; }
    .text-info { color: #0dcaf0 !important; }
    .text-danger { color: #dc3545 !important; }
    .text-secondary { color: #6c757d !important; }
    .text-dark { color: #212529 !important; }
</style>

<script>
    // Add copy functionality to code blocks
    document.addEventListener('DOMContentLoaded', function() {
        const codeBlocks = document.querySelectorAll('pre code');
        
        codeBlocks.forEach(block => {
            block.style.cursor = 'pointer';
            block.title = 'Click to copy';
            
            block.addEventListener('click', function() {
                const text = this.textContent;
                navigator.clipboard.writeText(text).then(() => {
                    // Show temporary success message
                    const originalText = this.textContent;
                    this.textContent = 'Copied!';
                    this.style.color = '#198754';
                    
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.style.color = '';
                    }, 1000);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                });
            });
        });

        // Update dynamic base URL display
        if (window.AppConfig) {
            document.getElementById('dynamicBaseUrl').textContent = window.AppConfig.apiBaseUrl;
        } else {
            // Fallback if config not loaded
            setTimeout(() => {
                if (window.AppConfig) {
                    document.getElementById('dynamicBaseUrl').textContent = window.AppConfig.apiBaseUrl;
                } else {
                    document.getElementById('dynamicBaseUrl').textContent = 'Configuration not loaded';
                }
            }, 1000);
        }
    });
</script>